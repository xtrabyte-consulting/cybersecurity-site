---
import Layout from '../layouts/Layout.astro';
---

<Layout title="Request a Quote" description="Get a customized cybersecurity solution quote from XtraByte Cybersecurity">
	<section class="page-header">
		<div class="container">
			<h1>Request a Quote</h1>
			<p>Let's discuss your security needs and create a customized solution</p>
		</div>
	</section>

	<section class="quote-form-section">
		<div class="container">
			<div class="form-wrapper">
				<div class="form-intro">
					<h2>Get Started Today</h2>
					<p>Fill out the form below and one of our security experts will contact you within 24 hours to discuss your requirements and provide a detailed quote.</p>
					
					<div class="benefits">
						<div class="benefit">
							<span class="benefit-icon">âœ“</span>
							<p>Free initial consultation</p>
						</div>
						<div class="benefit">
							<span class="benefit-icon">âœ“</span>
							<p>Custom pricing based on your needs</p>
						</div>
						<div class="benefit">
							<span class="benefit-icon">âœ“</span>
							<p>No obligation quote</p>
						</div>
						<div class="benefit">
							<span class="benefit-icon">âœ“</span>
							<p>24-hour response time</p>
						</div>
					</div>
				</div>

				<form class="quote-form" method="POST" action="/api/quote">
					<div class="form-section">
						<h3>Contact Information</h3>
						
						<div class="form-row">
							<div class="form-group">
								<label for="firstName">First Name *</label>
								<input type="text" id="firstName" name="firstName" required />
							</div>
							<div class="form-group">
								<label for="lastName">Last Name *</label>
								<input type="text" id="lastName" name="lastName" required />
							</div>
						</div>

						<div class="form-group">
							<label for="email">Business Email *</label>
							<input type="email" id="email" name="email" required />
						</div>

						<div class="form-group">
							<label for="phone">Phone Number *</label>
							<input type="tel" id="phone" name="phone" required />
						</div>

						<div class="form-group">
							<label for="company">Company Name *</label>
							<input type="text" id="company" name="company" required />
						</div>

						<div class="form-group">
							<label for="title">Job Title</label>
							<input type="text" id="title" name="title" />
						</div>
					</div>

					<div class="form-section">
						<h3>Service Requirements</h3>

						<div class="form-group">
							<label>Services Interested In * (Select all that apply)</label>
							<div class="checkbox-group">
								<label class="checkbox-label">
									<input type="checkbox" name="services" value="cve-scans" />
									<span>CVE Vulnerability Scanning</span>
								</label>
								<label class="checkbox-label">
									<input type="checkbox" name="services" value="penetration-testing" />
									<span>Penetration Testing</span>
								</label>
								<label class="checkbox-label">
									<input type="checkbox" name="services" value="en-18031-1" />
									<span>EN 18031-1 Compliance Testing</span>
								</label>
								<label class="checkbox-label">
									<input type="checkbox" name="services" value="security-consulting" />
									<span>Security Consulting</span>
								</label>
								<label class="checkbox-label">
									<input type="checkbox" name="services" value="incident-response" />
									<span>Incident Response</span>
								</label>
								<label class="checkbox-label">
									<input type="checkbox" name="services" value="managed-security" />
									<span>Managed Security Services</span>
								</label>
							</div>
						</div>

						<div class="form-group">
							<label for="industry">Industry *</label>
							<select id="industry" name="industry" required>
								<option value="">Select your industry</option>
								<option value="manufacturing">Manufacturing</option>
								<option value="energy">Energy & Utilities</option>
								<option value="finance">Financial Services</option>
								<option value="healthcare">Healthcare</option>
								<option value="retail">Retail</option>
								<option value="technology">Technology</option>
								<option value="government">Government</option>
								<option value="transportation">Transportation</option>
								<option value="other">Other</option>
							</select>
						</div>

						<div class="form-group">
							<label for="companySize">Company Size *</label>
							<select id="companySize" name="companySize" required>
								<option value="">Select company size</option>
								<option value="1-50">1-50 employees</option>
								<option value="51-200">51-200 employees</option>
								<option value="201-500">201-500 employees</option>
								<option value="501-1000">501-1,000 employees</option>
								<option value="1000+">1,000+ employees</option>
							</select>
						</div>

						<div class="form-group">
							<label for="timeline">Desired Timeline *</label>
							<select id="timeline" name="timeline" required>
								<option value="">Select timeline</option>
								<option value="immediate">Immediate (Within 2 weeks)</option>
								<option value="1-month">Within 1 month</option>
								<option value="1-3-months">1-3 months</option>
								<option value="3-6-months">3-6 months</option>
								<option value="planning">Just planning ahead</option>
							</select>
						</div>

						<div class="form-group">
							<label for="budget">Budget Range</label>
							<select id="budget" name="budget">
								<option value="">Select budget range (optional)</option>
								<option value="under-4k">Under $4,000</option>
								<option value="4k-8k">$4,000 - $8,000</option>
								<option value="8k-12k">$8,000 - $12,000</option>
								<option value="12k-20k">$12,000 - $20,000</option>
								<option value="20k-50k">$20,000 - $50,000</option>
								<option value="50k+">$50,000+</option>
							</select>
						</div>
					</div>

					<div class="form-section">
						<h3>Additional Information</h3>

						<div class="form-group">
							<label for="details">Project Details *</label>
							<textarea 
								id="details" 
								name="details" 
								rows="6" 
								placeholder="Please describe your security needs, current challenges, or specific requirements..."
								required
							></textarea>
						</div>

						<div class="form-group">
							<label for="currentSecurity">Current Security Measures</label>
							<textarea 
								id="currentSecurity" 
								name="currentSecurity" 
								rows="4" 
								placeholder="Briefly describe any existing security tools, processes, or certifications..."
							></textarea>
						</div>

						<div class="form-group">
							<label class="checkbox-label consent">
								<input type="checkbox" name="consent" required />
								<span>I agree to be contacted by XtraByte Cybersecurity regarding my quote request and understand that my information will be handled according to the privacy policy. *</span>
							</label>
						</div>
					</div>

					<div class="form-actions">
						<button type="submit" class="btn-submit">Submit Quote Request</button>
						<p class="form-note">* Required fields</p>
					</div>
				</form>
			</div>

			<div class="contact-info">
				<h2>Other Ways to Reach Us</h2>
				
				<div class="contact-methods">
					<div class="contact-method">
						<h3>ðŸ“§ Email</h3>
						<p>xbc@xtrabyte.com</p>
						<p class="contact-description">For general inquiries</p>
					</div>

					<div class="contact-method">
						<h3>ðŸ“ž Phone</h3>
						<p>+1 (802) 349-5325</p>
						<p class="contact-description">Mon-Fri 9:00 AM - 6:00 PM EST</p>
					</div>

					<div class="contact-method">
						<h3>ðŸ“¸ Instagram</h3>
						<p>@xtrabytevt</p>
						<p class="contact-description">Follow us for updates and tips</p>
					</div>
				</div>

				<div class="faq-section">
					<h3>Frequently Asked Questions</h3>
					<div class="faq">
						<h4>How quickly will I receive a quote?</h4>
						<p>Our team typically responds within 24 hours with an initial consultation and preliminary quote.</p>
					</div>
					<div class="faq">
						<h4>Is the initial consultation free?</h4>
						<p>Yes, we provide a free initial consultation to understand your needs and provide an accurate quote.</p>
					</div>
					<div class="faq">
						<h4>Can I customize the services?</h4>
						<p>Absolutely! We tailor our services to meet your specific security requirements and budget.</p>
					</div>
				</div>
			</div>
		</div>
	</section>
</Layout>

<style>
	.page-header {
		background: linear-gradient(135deg, var(--dark-bg) 0%, #0d1b2a 100%);
		padding: 4rem 0;
		text-align: center;
		border-bottom: 1px solid rgba(255, 255, 255, 0.1);
	}

	.page-header h1 {
		font-size: 3rem;
		margin-bottom: 1rem;
		color: var(--secondary-color);
	}

	.page-header p {
		font-size: 1.25rem;
		color: var(--text-gray);
	}

	.quote-form-section {
		padding: 5rem 0;
	}

	.form-wrapper {
		max-width: 900px;
		margin: 0 auto 4rem;
	}

	.form-intro {
		text-align: center;
		margin-bottom: 3rem;
	}

	.form-intro h2 {
		font-size: 2rem;
		margin-bottom: 1rem;
		color: var(--text-light);
	}

	.form-intro p {
		color: var(--text-gray);
		font-size: 1.1rem;
		margin-bottom: 2rem;
	}

	.benefits {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
		gap: 1.5rem;
		margin-top: 2rem;
	}

	.benefit {
		display: flex;
		align-items: center;
		gap: 0.75rem;
	}

	.benefit-icon {
		color: var(--accent-green);
		font-size: 1.5rem;
		font-weight: bold;
	}

	.benefit p {
		margin: 0;
		color: var(--text-light);
		font-size: 0.95rem;
	}

	.quote-form {
		background: var(--dark-card);
		border: 1px solid rgba(255, 255, 255, 0.1);
		border-radius: 1rem;
		padding: 3rem;
	}

	.form-section {
		margin-bottom: 3rem;
	}

	.form-section h3 {
		color: var(--secondary-color);
		font-size: 1.5rem;
		margin-bottom: 1.5rem;
		padding-bottom: 0.75rem;
		border-bottom: 2px solid rgba(255, 255, 255, 0.1);
	}

	.form-row {
		display: grid;
		grid-template-columns: 1fr 1fr;
		gap: 1rem;
	}

	.form-group {
		margin-bottom: 1.5rem;
	}

	.form-group label {
		display: block;
		color: var(--text-light);
		margin-bottom: 0.5rem;
		font-weight: 500;
	}

	.form-group input,
	.form-group select,
	.form-group textarea {
		width: 100%;
		padding: 0.75rem;
		background: var(--dark-bg);
		border: 1px solid rgba(255, 255, 255, 0.2);
		border-radius: 0.5rem;
		color: var(--text-light);
		font-size: 1rem;
		font-family: inherit;
		transition: border-color 0.3s;
	}

	.form-group input:focus,
	.form-group select:focus,
	.form-group textarea:focus {
		outline: none;
		border-color: var(--secondary-color);
	}

	.form-group textarea {
		resize: vertical;
	}

	.checkbox-group {
		display: flex;
		flex-direction: column;
		gap: 0.75rem;
	}

	.checkbox-label {
		display: flex;
		align-items: center;
		gap: 0.75rem;
		color: var(--text-light);
		cursor: pointer;
		padding: 0.5rem;
		border-radius: 0.25rem;
		transition: background 0.3s;
	}

	.checkbox-label:hover {
		background: rgba(255, 255, 255, 0.05);
	}

	.checkbox-label input[type="checkbox"] {
		width: auto;
		cursor: pointer;
	}

	.checkbox-label.consent {
		margin-top: 1rem;
		padding: 1rem;
		background: rgba(0, 163, 255, 0.1);
		border: 1px solid rgba(0, 163, 255, 0.3);
		border-radius: 0.5rem;
	}

	.form-actions {
		text-align: center;
		margin-top: 2rem;
	}

	.btn-submit {
		background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
		color: var(--text-light);
		border: none;
		padding: 1rem 3rem;
		border-radius: 0.5rem;
		font-size: 1.1rem;
		font-weight: 600;
		cursor: pointer;
		transition: transform 0.3s, box-shadow 0.3s;
	}

	.btn-submit:hover {
		transform: translateY(-2px);
		box-shadow: 0 10px 30px rgba(0, 163, 255, 0.4);
	}

	.form-note {
		color: var(--text-gray);
		font-size: 0.9rem;
		margin-top: 1rem;
	}

	.contact-info {
		max-width: 900px;
		margin: 0 auto;
	}

	.contact-info h2 {
		text-align: center;
		font-size: 2rem;
		margin-bottom: 2rem;
		color: var(--text-light);
	}

	.contact-methods {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
		gap: 2rem;
		margin-bottom: 3rem;
	}

	.contact-method {
		background: var(--dark-card);
		padding: 2rem;
		border-radius: 0.5rem;
		border: 1px solid rgba(255, 255, 255, 0.1);
		text-align: center;
	}

	.contact-method h3 {
		font-size: 1.5rem;
		margin-bottom: 1rem;
		color: var(--secondary-color);
	}

	.contact-method p {
		color: var(--text-light);
		font-size: 1.1rem;
		margin-bottom: 0.5rem;
	}

	.contact-description {
		color: var(--text-gray) !important;
		font-size: 0.9rem !important;
	}

	.faq-section {
		background: var(--dark-card);
		padding: 2rem;
		border-radius: 0.5rem;
		border: 1px solid rgba(255, 255, 255, 0.1);
	}

	.faq-section h3 {
		color: var(--secondary-color);
		font-size: 1.5rem;
		margin-bottom: 1.5rem;
	}

	.faq {
		margin-bottom: 1.5rem;
	}

	.faq h4 {
		color: var(--text-light);
		margin-bottom: 0.5rem;
	}

	.faq p {
		color: var(--text-gray);
		line-height: 1.6;
	}

	@media (max-width: 768px) {
		.page-header h1 {
			font-size: 2rem;
		}

		.quote-form {
			padding: 2rem 1.5rem;
		}

		.form-row {
			grid-template-columns: 1fr;
		}

		.benefits {
			grid-template-columns: 1fr;
		}

		.contact-methods {
			grid-template-columns: 1fr;
		}
	}
</style>

<script>
	// Form validation and submission handling
	document.addEventListener('DOMContentLoaded', () => {
		const form = document.querySelector('.quote-form') as HTMLFormElement;
		
		if (form) {
			form.addEventListener('submit', async (e) => {
				e.preventDefault();
				
				// Basic validation for checkboxes
				const serviceCheckboxes = form.querySelectorAll('input[name="services"]:checked');
				if (serviceCheckboxes.length === 0) {
					alert('Please select at least one service.');
					return;
				}

				// Disable submit button and show loading state
				const submitBtn = form.querySelector('.btn-submit') as HTMLButtonElement;
				if (!submitBtn) return;
				
				const originalText = submitBtn.textContent;
				submitBtn.disabled = true;
				submitBtn.textContent = 'Submitting...';

				try {
					// Collect form data
					const formData = new FormData(form);
					const data = {
						firstName: formData.get('firstName'),
						lastName: formData.get('lastName'),
						email: formData.get('email'),
						phone: formData.get('phone'),
						company: formData.get('company'),
						title: formData.get('title'),
						services: formData.getAll('services'),
						industry: formData.get('industry'),
						companySize: formData.get('companySize'),
						timeline: formData.get('timeline'),
						budget: formData.get('budget'),
						details: formData.get('details'),
						currentSecurity: formData.get('currentSecurity')
					};

					// Submit to API endpoint
					const response = await fetch('/api/quote', {
						method: 'POST',
						headers: {
							'Content-Type': 'application/json'
						},
						body: JSON.stringify(data)
					});

					const result = await response.json();

					if (response.ok) {
						alert('Thank you for your quote request! We will contact you at ' + data.email + ' within 24 hours.');
						form.reset();
					} else {
						throw new Error(result.error || 'Failed to submit form');
					}
				} catch (error) {
					console.error('Form submission error:', error);
					alert('There was an error submitting your request. Please try again or contact us directly at xbc@xtrabyte.com');
				} finally {
					// Re-enable submit button
					submitBtn.disabled = false;
					submitBtn.textContent = originalText || 'Submit Quote Request';
				}
			});
		}
	});
</script>
